$(document).ready(function(){function e(e){var n;return $.ajax({url:"libraries/"+e+"/package.json",type:"GET",async:!1,success:function(e){n=e,console.log("recieved json:"),console.log(n)},error:function(e){console.log("Error happened in AJAX Request!!")}}),n}function n(e){var n;return $.ajax({url:e,type:"GET",async:!1,success:function(e){n=e,console.log("recieved readme:")},error:function(e){console.log("Error happened in AJAX Request!!")}}),n}function s(){if(0===$(".editRegion").length){var e="";e+='<div class="row editRegion">',e+='    <div class="readme"></div>',e+='    <div class="options">',e+='        <button class="addButton"> >>> </button>',e+='        <div class="languages"></div>',e+='        <div class="versions">',e+='            <select class="versionsDropdown" name="select-version"></select>',e+="        </div>",e+='        <span class="copySuccess">Copied!</span>',e+="    </div>",e+='    <div class="importrLinks">',e+='        <span class="copyButton fa fa-files-o"></span>',e+='        <ul class="cdnLinks"></ul>',e+="    </div>",e+="</div>",$("body").append(e),$(".cdnLinks").sortable({cursor:"move",containment:"parent",axis:"y",cancel:".deleteLink"}),o()}}function o(){l=new Clipboard(".copyButton",{text:function(e){return t()}}),l.on("success",function(e){a(e)}),l.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)})}function a(e){$(".copySuccess").fadeIn("200"),$(".copySuccess").fadeOut("400")}function t(){for(var e="",n=0;n<u.length;n++)e=e+u[n]+"\n";return e}function r(e){$(".versionsDropdown").empty();for(var n=0;n<e.length;n++)$(".versionsDropdown").append('<option value="'+e[n]+'">'+e[n]+"</option>")}function c(e){$(".editRegion .languages").empty();var n=0;$.each(e,function(e,s){if(s){var o="";o=o+'<label for="language"><input type="radio" name="language" value="'+e+'" ',0==n&&(o+="checked",n++);var a=e.toUpperCase();o=o+"><span>"+a+"</span></label>",$(".editRegion .languages").append(o)}})}function i(e,n,s){var o="{version}",a=new RegExp(o,"g"),t=e.replace(a,s);o="{type}",a=new RegExp(o,"g"),t=t.replace(a,n),o="{minifiedState}",a=new RegExp(o,"g"),t=t.replace(a,"");var r="",c='<span class="tag">';"css"==n?(c=c+'&ltlink href="'+t+'" rel="stylesheet" type="text/css"&gt',r=r+'<link href="'+t+'" rel="stylesheet" type="text/css">'):(c=c+'&ltscript src="'+t+'"&gt&lt/script&gt',r=r+'<script src="'+t+'"></script>'),c+="</span>";var i='<span class="deleteLink fa fa-times"></span>';$(".importrLinks .cdnLinks").append('<li class="cdnLink">'+c+i+"</li>"),u.push(r)}var l,d,p=0,u=[];$("body").on("click",".deleteLink",function(e){console.log($(this));var n=$(this).closest(".cdnLink"),s=$(".cdnLink").index(n);u.splice(s,1),n.remove()}),$("body").on("click",".addButton",function(e){var n=d.cdnLinkStructure,s=$('.editRegion .languages input[name="language"]:checked').val(),o=$(".editRegion .versionsDropdown").val();i(n,s,o)}),$("body").on("search",function(o){var a=o.searchString;console.log("searched: "+a);var t=e(a);d=t;var i=n(t.readme);s(),p=1;var l=new showdown.Converter,u=l.makeHtml(i);$(".readme").html(u),r(t.versions),c(t.languages)})});